========================================
DATABASE MIGRATION LOG
========================================
This file automatically records all database schema changes.
Format: [TIMESTAMP] - [ACTION] - [DETAILS]

========================================

[2025-11-21T00:21:16.160Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-21T00:21:16.273Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-21T00:21:16.383Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-21T00:21:16.509Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:21:16.618Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-21T00:21:16.729Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-21T00:21:16.842Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-21T00:21:16.958Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-21T00:21:17.074Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-21T00:21:17.192Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:21:17.301Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-21T00:21:17.411Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-21T00:21:17.521Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-21T00:21:17.632Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-21T00:21:17.745Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:21:17.855Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-21T00:21:17.963Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-21T00:21:18.078Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-21T00:21:18.186Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-21T00:21:18.295Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-21T00:21:18.404Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-21T00:21:18.513Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-21T00:21:18.621Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-21T00:21:18.736Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:21:18.844Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-21T00:21:18.954Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-21T00:21:19.068Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:21:19.177Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-21T00:21:19.286Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-21T00:53:26.156Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-21T00:53:26.402Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-21T00:53:26.515Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-21T00:53:26.759Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:53:27.004Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-21T00:53:27.112Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-21T00:53:27.365Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-21T00:53:27.607Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-21T00:53:27.857Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-21T00:53:28.101Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:53:28.347Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-21T00:53:28.456Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-21T00:53:28.709Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-21T00:53:28.816Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-21T00:53:28.926Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:53:29.175Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-21T00:53:29.282Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-21T00:53:29.524Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-21T00:53:29.631Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-21T00:53:29.875Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-21T00:53:30.127Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-21T00:53:30.369Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-21T00:53:30.476Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-21T00:53:30.584Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:53:30.694Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-21T00:53:30.940Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-21T00:53:31.187Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-21T00:53:31.431Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-21T00:53:31.680Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-21T01:02:15.041Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-21T01:02:15.150Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-21T01:02:15.267Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-21T01:02:15.377Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T01:02:15.484Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-21T01:02:15.592Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-21T01:02:15.701Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-21T01:02:15.812Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-21T01:02:15.919Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-21T01:02:16.027Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T01:02:16.134Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-21T01:02:16.240Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-21T01:02:16.347Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-21T01:02:16.589Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-21T01:02:16.697Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-21T01:02:16.806Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-21T01:02:17.052Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-21T01:02:17.296Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-21T01:02:17.540Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-21T01:02:17.651Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-21T01:02:17.892Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-21T01:02:18.000Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-21T01:02:18.108Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-21T01:02:18.353Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-21T01:02:18.602Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-21T01:02:18.848Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-21T01:02:18.955Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-21T01:02:19.062Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-21T01:02:19.313Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T09:10:20.284Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T09:10:20.427Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T09:10:20.734Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T09:10:20.873Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:10:21.420Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T09:10:22.223Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T09:10:22.362Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T09:10:22.496Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T09:10:22.636Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T09:10:23.313Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:10:23.451Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T09:10:24.019Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T09:10:24.154Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T09:10:24.293Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T09:10:24.848Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:10:24.982Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T09:10:25.115Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T09:10:25.250Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T09:10:25.384Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T09:10:25.520Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T09:10:25.654Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T09:10:25.791Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T09:10:25.924Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T09:10:26.056Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:10:26.196Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T09:10:26.332Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T09:10:26.469Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:10:26.605Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T09:10:26.747Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T09:31:42.360Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T09:31:42.530Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T09:31:42.675Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T09:31:42.816Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:31:42.951Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T09:31:43.081Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T09:31:43.998Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T09:31:44.145Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T09:31:44.497Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T09:31:44.685Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:31:44.834Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T09:31:44.974Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T09:31:45.114Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T09:31:45.259Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T09:31:45.614Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:31:45.925Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T09:31:46.864Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T09:31:47.009Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T09:31:47.160Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T09:31:47.302Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T09:31:47.795Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T09:31:47.939Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T09:31:48.081Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T09:31:48.218Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:31:48.351Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T09:31:48.489Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T09:31:48.789Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T09:31:48.982Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T09:31:49.263Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T12:12:58.707Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T12:12:58.856Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T12:12:58.989Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T12:12:59.116Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T12:12:59.645Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T12:12:59.774Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T12:12:59.902Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T12:13:00.028Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T12:13:00.153Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T12:13:00.263Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T12:13:00.367Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T12:13:00.474Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T12:13:00.592Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T12:13:00.709Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T12:13:00.848Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T12:13:00.989Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T12:13:01.120Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T12:13:01.253Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T12:13:01.398Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T12:13:01.538Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T12:13:01.675Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T12:13:01.814Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T12:13:01.950Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T12:13:02.083Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T12:13:02.206Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T12:13:02.323Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T12:13:02.427Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T12:13:02.538Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T12:13:02.650Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T13:37:59.935Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T13:38:00.041Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T13:38:00.140Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T13:38:00.217Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T13:38:00.293Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T13:38:00.375Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T13:38:00.461Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T13:38:00.552Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T13:38:00.634Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T13:38:00.712Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T13:38:00.788Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T13:38:00.863Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T13:38:00.940Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T13:38:01.015Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T13:38:01.091Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T13:38:01.167Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T13:38:01.242Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T13:38:01.318Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T13:38:01.397Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T13:38:01.477Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T13:38:01.651Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T13:38:01.727Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T13:38:01.802Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T13:38:01.918Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T13:38:01.997Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T13:38:02.072Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T13:38:02.150Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T13:38:02.227Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T13:38:02.311Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T13:38:02.400Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T13:38:02.772Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T13:38:02.857Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T13:38:02.934Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T13:38:03.010Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T13:38:03.085Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T13:38:03.161Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T13:38:03.239Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T13:38:03.317Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T15:34:44.167Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T15:34:44.278Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T15:34:44.378Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T15:34:44.483Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:34:44.585Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T15:34:44.685Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T15:34:44.789Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T15:34:44.899Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T15:34:45.019Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T15:34:45.131Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE NOT NULL,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:34:45.243Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T15:34:45.344Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T15:34:45.453Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T15:34:45.567Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T15:34:45.682Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:34:45.784Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T15:34:45.884Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T15:34:45.992Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T15:34:46.094Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T15:34:46.199Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T15:34:46.308Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T15:34:46.408Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T15:34:46.509Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T15:34:46.612Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:34:46.714Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T15:34:46.813Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T15:34:46.913Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T15:34:47.012Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T15:34:47.114Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T15:34:47.212Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T15:34:47.314Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T15:34:47.415Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T15:34:47.521Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:34:47.619Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T15:34:47.719Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T15:34:47.828Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:34:47.927Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T15:34:48.028Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T15:55:55.152Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T15:55:55.257Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T15:55:55.379Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T15:55:55.516Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:55:55.637Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T15:55:55.750Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T15:55:55.906Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T15:55:56.039Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T15:55:56.181Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T15:55:56.304Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri DATE,
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri DATE,
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:55:56.408Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T15:55:56.527Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T15:55:56.638Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T15:55:56.747Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T15:55:56.862Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:55:56.961Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T15:55:57.066Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T15:55:57.181Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T15:55:57.299Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T15:55:57.413Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T15:55:57.543Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T15:55:57.657Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T15:55:57.758Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T15:55:57.885Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:55:58.006Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T15:55:58.118Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T15:55:58.235Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T15:55:58.331Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T15:55:58.436Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T15:55:58.549Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T15:55:58.646Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T15:55:58.779Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T15:55:58.919Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:55:59.037Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T15:55:59.136Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T15:55:59.250Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T15:55:59.358Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T15:55:59.467Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:05:16.707Z] - CUSTOM QUERY - Added temporary column date_of_birth_hijri_temp
SQL Query: ALTER TABLE employees ADD COLUMN IF NOT EXISTS date_of_birth_hijri_temp VARCHAR(50)
---

[2025-11-22T16:05:16.816Z] - CUSTOM QUERY - Added temporary column id_expiry_date_hijri_temp
SQL Query: ALTER TABLE employees ADD COLUMN IF NOT EXISTS id_expiry_date_hijri_temp VARCHAR(50)
---

[2025-11-22T16:05:16.940Z] - CUSTOM QUERY - Copied date_of_birth_hijri data to temporary column
SQL Query: UPDATE employees 
       SET date_of_birth_hijri_temp = CASE 
         WHEN date_of_birth_hijri IS NOT NULL 
         THEN TO_CHAR(date_of_birth_hijri, 'DD/MM/YYYY')
         ELSE NULL 
       END
---

[2025-11-22T16:05:17.039Z] - CUSTOM QUERY - Copied id_expiry_date_hijri data to temporary column
SQL Query: UPDATE employees 
       SET id_expiry_date_hijri_temp = CASE 
         WHEN id_expiry_date_hijri IS NOT NULL 
         THEN TO_CHAR(id_expiry_date_hijri, 'DD/MM/YYYY')
         ELSE NULL 
       END
---

[2025-11-22T16:05:17.146Z] - CUSTOM QUERY - Dropped old date_of_birth_hijri DATE column
SQL Query: ALTER TABLE employees DROP COLUMN IF EXISTS date_of_birth_hijri
---

[2025-11-22T16:05:17.252Z] - CUSTOM QUERY - Dropped old id_expiry_date_hijri DATE column
SQL Query: ALTER TABLE employees DROP COLUMN IF EXISTS id_expiry_date_hijri
---

[2025-11-22T16:05:17.357Z] - CUSTOM QUERY - Renamed date_of_birth_hijri_temp to date_of_birth_hijri
SQL Query: ALTER TABLE employees RENAME COLUMN date_of_birth_hijri_temp TO date_of_birth_hijri
---

[2025-11-22T16:05:17.457Z] - CUSTOM QUERY - Renamed id_expiry_date_hijri_temp to id_expiry_date_hijri
SQL Query: ALTER TABLE employees RENAME COLUMN id_expiry_date_hijri_temp TO id_expiry_date_hijri
---

[2025-11-22T16:14:16.542Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:14:16.651Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:14:16.753Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:14:16.865Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:17.002Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:14:17.119Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:14:17.229Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:14:17.347Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:14:17.471Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:14:17.585Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:17.721Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:14:17.838Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:14:17.956Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:14:18.054Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:14:18.158Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:18.270Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:14:18.388Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:14:18.508Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:14:18.631Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:14:18.745Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:14:18.854Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:14:18.953Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:14:19.059Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:14:19.174Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:19.291Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:14:19.423Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:14:19.547Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:14:19.664Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:14:19.774Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:14:19.885Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:14:20.002Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:14:20.126Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:14:20.256Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:20.353Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:14:20.520Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:14:20.629Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:20.727Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:14:20.828Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:14:56.030Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:14:56.138Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:14:56.267Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:14:56.384Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:56.483Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:14:56.604Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:14:56.727Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:14:56.835Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:14:56.939Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:14:57.077Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:57.197Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:14:57.326Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:14:57.447Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:14:57.574Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:14:57.684Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:57.782Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:14:57.889Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:14:57.998Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:14:58.099Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:14:58.209Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:14:58.308Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:14:58.407Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:14:58.517Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:14:58.618Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:58.733Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:14:58.838Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:14:58.959Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:14:59.063Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:14:59.203Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:14:59.317Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:14:59.428Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:14:59.528Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:14:59.644Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:14:59.753Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:14:59.868Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:14:59.985Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:15:00.083Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:15:00.197Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:17:53.108Z] - CUSTOM QUERY - Removed NOT NULL constraint from date_of_birth_gregorian
SQL Query: ALTER TABLE employees ALTER COLUMN date_of_birth_gregorian DROP NOT NULL
---

[2025-11-22T16:18:19.388Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:18:19.492Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:18:19.597Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:18:19.702Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:18:19.804Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:18:19.903Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:18:20.009Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:18:20.114Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:18:20.246Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:18:20.364Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      updated_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (updated_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:18:20.473Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:18:20.589Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:18:20.689Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:18:20.900Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:18:21.015Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:18:21.146Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:18:21.268Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:18:21.383Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:18:21.511Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:18:21.634Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:18:21.744Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:18:21.875Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:18:21.987Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:18:22.098Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:18:22.218Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:18:22.323Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:18:22.429Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:18:22.532Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:18:22.638Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:18:22.742Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:18:22.844Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:18:22.946Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:18:23.060Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:18:23.174Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:18:23.276Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:18:23.382Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:18:23.498Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:18:23.615Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:21:50.368Z] - CUSTOM QUERY - FAILED - Updated existing created_by values to use branch_id - insert or update on table "employees" violates foreign key constraint "employees_created_by_fkey"
SQL Query: UPDATE employees 
       SET created_by = branch_id 
       WHERE created_by IS NULL OR created_by NOT IN (SELECT id FROM branches)
---

[2025-11-22T16:22:06.511Z] - CUSTOM QUERY - Dropped old foreign key constraint for created_by
SQL Query: ALTER TABLE employees DROP CONSTRAINT IF EXISTS employees_created_by_fkey
---

[2025-11-22T16:22:06.634Z] - CUSTOM QUERY - Dropped old foreign key constraint for updated_by
SQL Query: ALTER TABLE employees DROP CONSTRAINT IF EXISTS employees_updated_by_fkey
---

[2025-11-22T16:22:06.745Z] - CUSTOM QUERY - Updated existing created_by values to use branch_id
SQL Query: UPDATE employees 
       SET created_by = branch_id 
       WHERE created_by IS NULL OR created_by NOT IN (SELECT id FROM branches)
---

[2025-11-22T16:22:06.853Z] - CUSTOM QUERY - Updated existing updated_by values to use branch_id
SQL Query: UPDATE employees 
       SET updated_by = COALESCE(branch_id, created_by) 
       WHERE updated_by IS NULL OR updated_by NOT IN (SELECT id FROM branches)
---

[2025-11-22T16:22:06.969Z] - CUSTOM QUERY - Added NOT NULL constraint to created_by
SQL Query: ALTER TABLE employees ALTER COLUMN created_by SET NOT NULL
---

[2025-11-22T16:22:07.078Z] - CUSTOM QUERY - Added NOT NULL constraint to updated_by
SQL Query: ALTER TABLE employees ALTER COLUMN updated_by SET NOT NULL
---

[2025-11-22T16:22:07.215Z] - CUSTOM QUERY - Added foreign key constraint for created_by to branches
SQL Query: ALTER TABLE employees 
       ADD CONSTRAINT employees_created_by_fkey 
       FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT
---

[2025-11-22T16:22:07.325Z] - CUSTOM QUERY - Added foreign key constraint for updated_by to branches
SQL Query: ALTER TABLE employees 
       ADD CONSTRAINT employees_updated_by_fkey 
       FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
---

[2025-11-22T16:22:37.522Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:22:37.626Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:22:37.724Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:22:37.831Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:22:37.936Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:22:38.040Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:22:38.146Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:22:38.255Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:22:38.362Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:22:38.470Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:22:38.576Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:22:38.677Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:22:38.792Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:22:38.948Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:22:39.085Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:22:39.208Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:22:39.321Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:22:39.449Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:22:39.569Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:22:39.686Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:22:39.808Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:22:39.932Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:22:40.062Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:22:40.194Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:22:40.308Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:22:40.413Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:22:40.515Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:22:40.614Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:22:40.724Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:22:40.846Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:22:40.953Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:22:41.055Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:22:41.162Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:22:41.280Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:22:41.398Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:22:41.524Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:22:41.639Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:22:41.751Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:24:38.114Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:24:38.244Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:24:38.359Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:24:38.482Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:24:38.608Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:24:38.735Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:24:38.857Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:24:39.001Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:24:39.151Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:24:39.283Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:24:39.406Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:24:39.544Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:24:39.683Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:24:39.815Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:24:39.943Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:24:40.082Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:24:40.193Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:24:40.315Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:24:40.444Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:24:40.575Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:24:40.700Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:24:40.825Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:24:40.956Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:24:41.101Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:24:41.237Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:24:41.376Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:24:41.495Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:24:41.644Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:24:41.779Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:24:42.014Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:24:42.163Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:24:42.353Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:24:42.513Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:24:42.652Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:24:42.772Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:24:42.892Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:24:43.014Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:24:43.140Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:27:50.047Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:27:50.168Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:27:50.277Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:27:50.406Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:27:50.530Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:27:50.654Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:27:50.769Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:27:50.885Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:27:50.997Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:27:51.103Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:27:51.201Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:27:51.313Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:27:51.425Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:27:51.530Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:27:51.655Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:27:51.772Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:27:51.895Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:27:52.004Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:27:52.124Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:27:52.253Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:27:52.360Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:27:52.460Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:27:52.581Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:27:52.712Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:27:52.813Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:27:52.913Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:27:53.036Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:27:53.157Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:27:53.264Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:27:53.374Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:27:53.480Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:27:53.590Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:27:53.695Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:27:53.800Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:27:53.913Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:27:54.026Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:27:54.130Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:27:54.239Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:30:13.005Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:30:13.126Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:30:13.249Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:30:13.359Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:30:13.480Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:30:13.584Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:30:13.692Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:30:13.911Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:30:14.032Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:30:14.166Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:30:14.269Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:30:14.389Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:30:14.497Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:30:14.603Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:30:14.710Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:30:14.818Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:30:14.969Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:30:15.086Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:30:15.203Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:30:15.325Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:30:15.455Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:30:15.582Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:30:15.699Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:30:15.806Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:30:15.915Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:30:16.016Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:30:16.115Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:30:16.217Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:30:16.316Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:30:16.427Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:30:16.548Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:30:16.694Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:30:16.822Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:30:16.945Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:30:17.073Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:30:17.188Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:30:17.301Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:30:17.400Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:38:22.293Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:38:22.404Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:38:22.523Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:38:22.651Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:22.775Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:38:22.892Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:38:23.021Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:38:23.146Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:38:23.283Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:38:23.396Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:38:23.511Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:38:23.628Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:38:23.731Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:38:23.851Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:38:23.996Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:24.100Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:38:24.263Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:38:24.375Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:38:24.507Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:38:24.616Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:38:24.741Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:38:24.856Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:38:24.956Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:38:25.066Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:25.187Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:38:25.296Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:38:25.413Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:38:25.516Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:38:25.621Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:38:25.735Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:38:25.847Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:38:25.954Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:38:26.074Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:26.181Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:38:26.286Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:38:26.497Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:26.608Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:38:26.732Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:38:47.536Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:38:47.647Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:38:47.764Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:38:47.862Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:47.961Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:38:48.068Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:38:48.185Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:38:48.317Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:38:48.422Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:38:48.528Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:38:48.630Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:38:48.742Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:38:48.856Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:38:48.958Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:38:49.067Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:49.167Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:38:49.285Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:38:49.400Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:38:49.513Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:38:49.612Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:38:49.718Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:38:49.846Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:38:49.952Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:38:50.064Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:50.191Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:38:50.310Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:38:50.446Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:38:50.562Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:38:50.665Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:38:50.786Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:38:50.895Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:38:51.002Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:38:51.106Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:51.208Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:38:51.308Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:38:51.430Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:38:51.545Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:38:51.670Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:40:24.088Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:40:24.194Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:40:24.305Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:40:24.424Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:40:24.552Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:40:24.665Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:40:24.794Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:40:24.921Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:40:25.059Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:40:25.167Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:40:25.276Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:40:25.386Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:40:25.494Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:40:25.615Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:40:25.724Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:40:25.852Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:40:25.970Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:40:26.095Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:40:26.206Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:40:26.316Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:40:26.433Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:40:26.535Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:40:26.646Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:40:26.766Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:40:26.893Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:40:27.064Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:40:27.177Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:40:27.345Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:40:27.450Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:40:27.565Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:40:27.687Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:40:27.836Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:40:27.955Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:40:28.087Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:40:28.205Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:40:28.325Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:40:28.434Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:40:28.535Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:42:55.636Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:42:55.746Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:42:55.866Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:42:55.977Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:42:56.092Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:42:56.211Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:42:56.318Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:42:56.425Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:42:56.551Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:42:56.680Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:42:56.792Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:42:56.914Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:42:57.041Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:42:57.155Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:42:57.283Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:42:57.393Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:42:57.505Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:42:57.633Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:42:57.739Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:42:57.846Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:42:57.973Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:42:58.079Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:42:58.207Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:42:58.340Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:42:58.445Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:42:58.551Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:42:58.666Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:42:58.771Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:42:58.885Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:42:58.991Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:42:59.100Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:42:59.234Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:42:59.342Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:42:59.462Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:42:59.608Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:42:59.749Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:42:59.908Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:43:00.031Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T16:43:51.709Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T16:43:51.814Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T16:43:51.922Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T16:43:52.022Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:43:52.132Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T16:43:52.243Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T16:43:52.348Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T16:43:52.457Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:43:52.564Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T16:43:52.670Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T16:43:52.777Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T16:43:52.880Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T16:43:52.984Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T16:43:53.153Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T16:43:53.311Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:43:53.424Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T16:43:53.541Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T16:43:53.655Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T16:43:53.758Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T16:43:53.861Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T16:43:53.977Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T16:43:54.095Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T16:43:54.212Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T16:43:54.342Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:43:54.464Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T16:43:54.582Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T16:43:54.688Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T16:43:54.802Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T16:43:54.961Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T16:43:55.075Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T16:43:55.208Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T16:43:55.326Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T16:43:55.454Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:43:55.585Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T16:43:55.732Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T16:43:55.848Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T16:43:55.984Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T16:43:56.211Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T17:03:24.125Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T17:03:24.239Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T17:03:24.357Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T17:03:24.472Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:03:24.581Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T17:03:24.694Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T17:03:24.818Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T17:03:24.940Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:03:25.056Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:03:25.174Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T17:03:25.299Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T17:03:25.428Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T17:03:25.542Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T17:03:25.659Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T17:03:25.780Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:03:25.894Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T17:03:26.034Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T17:03:26.274Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T17:03:26.435Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T17:03:26.566Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T17:03:26.678Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T17:03:26.796Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T17:03:26.907Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T17:03:27.022Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:03:27.135Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T17:03:27.265Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T17:03:27.556Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T17:03:27.686Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T17:03:27.809Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T17:03:27.922Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T17:03:28.034Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T17:03:28.158Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T17:03:28.271Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:03:28.386Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T17:03:28.507Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T17:03:28.634Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:03:28.757Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T17:03:28.877Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T17:07:10.691Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T17:07:10.809Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T17:07:10.929Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T17:07:11.089Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:07:11.217Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T17:07:11.361Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T17:07:11.479Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T17:07:11.596Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:07:11.727Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:07:11.863Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T17:07:11.978Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T17:07:12.109Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T17:07:12.222Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T17:07:12.342Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T17:07:12.459Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:07:12.586Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T17:07:12.705Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T17:07:12.906Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T17:07:13.036Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T17:07:13.167Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T17:07:13.279Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T17:07:13.394Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T17:07:13.523Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T17:07:13.639Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:07:13.748Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T17:07:13.859Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T17:07:13.974Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T17:07:14.089Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T17:07:14.199Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T17:07:14.320Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T17:07:14.447Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T17:07:14.556Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T17:07:14.672Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:07:14.798Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T17:07:14.907Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T17:07:15.023Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:07:15.139Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T17:07:15.265Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T17:10:27.585Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T17:10:27.709Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T17:10:27.810Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T17:10:27.933Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:10:28.034Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T17:10:28.146Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T17:10:28.244Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T17:10:28.351Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:10:28.494Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:10:28.599Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T17:10:28.713Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T17:10:28.815Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T17:10:28.921Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T17:10:29.020Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T17:10:29.132Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:10:29.235Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T17:10:29.342Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T17:10:29.444Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T17:10:29.561Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T17:10:29.664Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T17:10:29.765Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T17:10:29.863Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T17:10:29.971Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T17:10:30.080Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:10:30.203Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T17:10:30.309Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T17:10:30.405Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T17:10:30.504Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T17:10:30.610Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T17:10:30.724Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T17:10:30.830Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T17:10:30.950Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T17:10:31.063Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:10:31.179Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T17:10:31.289Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T17:10:31.403Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:10:31.505Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T17:10:31.607Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T17:13:30.931Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T17:13:31.034Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T17:13:31.140Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T17:13:31.249Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:13:31.355Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T17:13:31.480Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T17:13:31.589Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T17:13:31.700Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:13:31.808Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:13:31.946Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T17:13:32.049Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T17:13:32.158Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T17:13:32.267Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T17:13:32.381Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T17:13:32.523Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:13:32.623Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T17:13:32.740Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T17:13:32.843Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T17:13:32.943Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T17:13:33.047Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T17:13:33.154Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T17:13:33.262Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T17:13:33.372Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T17:13:33.503Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:13:33.628Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T17:13:33.733Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T17:13:33.847Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T17:13:33.955Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T17:13:34.054Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T17:13:34.160Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T17:13:34.279Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T17:13:34.388Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T17:13:34.504Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:13:34.613Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T17:13:34.714Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T17:13:34.823Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:13:34.936Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T17:13:35.036Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T17:25:11.586Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T17:25:11.688Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T17:25:11.800Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T17:25:11.906Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:25:12.012Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T17:25:12.120Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T17:25:12.227Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T17:25:12.352Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:25:12.467Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:25:12.594Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T17:25:12.692Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T17:25:12.793Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T17:25:12.892Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T17:25:13.002Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T17:25:13.123Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:25:13.245Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T17:25:13.348Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T17:25:13.467Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T17:25:13.579Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T17:25:13.677Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T17:25:13.789Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T17:25:13.887Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T17:25:14.001Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T17:25:14.112Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:25:14.222Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T17:25:14.328Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T17:25:14.431Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T17:25:14.538Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T17:25:14.637Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T17:25:14.741Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T17:25:14.846Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T17:25:14.966Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T17:25:15.066Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:25:15.167Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T17:25:15.266Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T17:25:15.372Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:25:15.466Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T17:25:15.579Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

[2025-11-22T17:28:25.583Z] - CREATE TABLE - Created table: branches
SQL Query: CREATE TABLE IF NOT EXISTS branches (
      id SERIAL PRIMARY KEY,
      branch_name VARCHAR(255) NOT NULL,
      branch_location VARCHAR(500) NOT NULL,
      branch_type VARCHAR(50) NOT NULL CHECK (branch_type IN ('school', 'healthcare_center')),
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
    )
---

[2025-11-22T17:28:25.685Z] - CUSTOM QUERY - Created index on branches.branch_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_type ON branches(branch_type)
---

[2025-11-22T17:28:25.796Z] - CUSTOM QUERY - Created index on branches.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_branches_username ON branches(username)
---

[2025-11-22T17:28:25.903Z] - CREATE TABLE - Created table: users
SQL Query: CREATE TABLE IF NOT EXISTS users (
      id SERIAL PRIMARY KEY,
      username VARCHAR(255) UNIQUE NOT NULL,
      password VARCHAR(255) NOT NULL,
      role VARCHAR(50) NOT NULL CHECK (role IN ('main_manager', 'branch_manager')),
      branch_id INTEGER,
      full_name VARCHAR(255) NOT NULL,
      email VARCHAR(255) UNIQUE,
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE SET NULL,
      FOREIGN KEY (created_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:28:26.018Z] - CUSTOM QUERY - Created index on users.username
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_username ON users(username)
---

[2025-11-22T17:28:26.118Z] - CUSTOM QUERY - Created index on users.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_branch_id ON users(branch_id)
---

[2025-11-22T17:28:26.220Z] - CUSTOM QUERY - Created index on users.role
SQL Query: CREATE INDEX IF NOT EXISTS idx_users_role ON users(role)
---

[2025-11-22T17:28:26.326Z] - CREATE TABLE - Created table: schools
SQL Query: CREATE TABLE IF NOT EXISTS schools (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      school_code VARCHAR(50) UNIQUE,
      education_level VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:28:26.434Z] - CREATE TABLE - Created table: healthcare_centers
SQL Query: CREATE TABLE IF NOT EXISTS healthcare_centers (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER UNIQUE NOT NULL,
      center_code VARCHAR(50) UNIQUE,
      center_type VARCHAR(100),
      license_number VARCHAR(100),
      additional_info TEXT,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE
    )
---

[2025-11-22T17:28:26.551Z] - CREATE TABLE - Created table: employees
SQL Query: CREATE TABLE IF NOT EXISTS employees (
      id SERIAL PRIMARY KEY,
      employee_id_number VARCHAR(100) UNIQUE NOT NULL,
      branch_id INTEGER NOT NULL,
      first_name VARCHAR(100) NOT NULL,
      second_name VARCHAR(100) NOT NULL,
      third_name VARCHAR(100) NOT NULL,
      fourth_name VARCHAR(100) NOT NULL,
      occupation VARCHAR(100) NOT NULL,
      nationality VARCHAR(100) NOT NULL,
      date_of_birth_hijri VARCHAR(50),
      date_of_birth_gregorian DATE,
      id_or_residency_number VARCHAR(100) UNIQUE NOT NULL,
      id_type VARCHAR(50) NOT NULL CHECK (id_type IN ('citizen', 'resident')),
      gender VARCHAR(20) NOT NULL CHECK (gender IN ('male', 'female')),
      id_expiry_date_hijri VARCHAR(50),
      id_expiry_date_gregorian DATE,
      religion VARCHAR(100),
      marital_status VARCHAR(50),
      educational_qualification VARCHAR(200),
      specialization VARCHAR(200),
      bank_iban VARCHAR(50),
      bank_name VARCHAR(200),
      email VARCHAR(255),
      phone_number VARCHAR(50),
      contract_type VARCHAR(100),
      salary DECIMAL(10,2),
      is_active BOOLEAN DEFAULT true,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      created_by INTEGER NOT NULL,
      updated_by INTEGER NOT NULL,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (created_by) REFERENCES branches(id) ON DELETE RESTRICT,
      FOREIGN KEY (updated_by) REFERENCES branches(id) ON DELETE RESTRICT
    )
---

[2025-11-22T17:28:26.652Z] - CUSTOM QUERY - Created index on employees.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_branch_id ON employees(branch_id)
---

[2025-11-22T17:28:26.753Z] - CUSTOM QUERY - Created index on employees.employee_id_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_employee_id ON employees(employee_id_number)
---

[2025-11-22T17:28:26.853Z] - CUSTOM QUERY - Created index on employees.id_or_residency_number
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_id_residency ON employees(id_or_residency_number)
---

[2025-11-22T17:28:26.953Z] - CUSTOM QUERY - Created index on employees.occupation
SQL Query: CREATE INDEX IF NOT EXISTS idx_employees_occupation ON employees(occupation)
---

[2025-11-22T17:28:27.088Z] - CREATE TABLE - Created table: employee_documents
SQL Query: CREATE TABLE IF NOT EXISTS employee_documents (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:28:27.193Z] - CUSTOM QUERY - Created index on employee_documents.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_id ON employee_documents(employee_id)
---

[2025-11-22T17:28:27.294Z] - CUSTOM QUERY - Created index on employee_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_type ON employee_documents(document_type)
---

[2025-11-22T17:28:27.493Z] - CUSTOM QUERY - Created composite index on employee_documents(employee_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_employee_type ON employee_documents(employee_id, document_type)
---

[2025-11-22T17:28:27.593Z] - CUSTOM QUERY - Created index on employee_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_mime_type ON employee_documents(mime_type)
---

[2025-11-22T17:28:27.693Z] - CUSTOM QUERY - Created index on employee_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_uploaded_at ON employee_documents(uploaded_at)
---

[2025-11-22T17:28:27.793Z] - CUSTOM QUERY - Created index on employee_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_expiry_date ON employee_documents(expiry_date)
---

[2025-11-22T17:28:27.892Z] - CUSTOM QUERY - Created index on employee_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_is_verified ON employee_documents(is_verified)
---

[2025-11-22T17:28:27.989Z] - CUSTOM QUERY - Created index on employee_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_documents_file_name ON employee_documents(file_name)
---

[2025-11-22T17:28:28.093Z] - CREATE TABLE - Created table: branch_documents
SQL Query: CREATE TABLE IF NOT EXISTS branch_documents (
      id SERIAL PRIMARY KEY,
      branch_id INTEGER NOT NULL,
      document_type VARCHAR(100) NOT NULL,
      file_name VARCHAR(255) NOT NULL,
      file_path VARCHAR(500) NOT NULL,
      file_size INTEGER,
      mime_type VARCHAR(100) NOT NULL,
      file_extension VARCHAR(10),
      thumbnail_path VARCHAR(500),
      description TEXT,
      expiry_date DATE,
      is_verified BOOLEAN DEFAULT false,
      verified_at TIMESTAMP,
      verified_by INTEGER,
      version INTEGER DEFAULT 1,
      is_active BOOLEAN DEFAULT true,
      uploaded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      uploaded_by INTEGER,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (branch_id) REFERENCES branches(id) ON DELETE CASCADE,
      FOREIGN KEY (uploaded_by) REFERENCES users(id) ON DELETE SET NULL,
      FOREIGN KEY (verified_by) REFERENCES users(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:28:28.202Z] - CUSTOM QUERY - Created index on branch_documents.branch_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_id ON branch_documents(branch_id)
---

[2025-11-22T17:28:28.327Z] - CUSTOM QUERY - Created index on branch_documents.document_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_type ON branch_documents(document_type)
---

[2025-11-22T17:28:28.428Z] - CUSTOM QUERY - Created composite index on branch_documents(branch_id, document_type)
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_branch_type ON branch_documents(branch_id, document_type)
---

[2025-11-22T17:28:28.530Z] - CUSTOM QUERY - Created index on branch_documents.mime_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_mime_type ON branch_documents(mime_type)
---

[2025-11-22T17:28:28.634Z] - CUSTOM QUERY - Created index on branch_documents.uploaded_at
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_uploaded_at ON branch_documents(uploaded_at)
---

[2025-11-22T17:28:28.737Z] - CUSTOM QUERY - Created index on branch_documents.expiry_date
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_expiry_date ON branch_documents(expiry_date)
---

[2025-11-22T17:28:28.848Z] - CUSTOM QUERY - Created index on branch_documents.is_verified
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_is_verified ON branch_documents(is_verified)
---

[2025-11-22T17:28:28.970Z] - CUSTOM QUERY - Created index on branch_documents.file_name
SQL Query: CREATE INDEX IF NOT EXISTS idx_branch_documents_file_name ON branch_documents(file_name)
---

[2025-11-22T17:28:29.073Z] - CREATE TABLE - Created table: employee_professional_classifications
SQL Query: CREATE TABLE IF NOT EXISTS employee_professional_classifications (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      profession VARCHAR(100) NOT NULL,
      classification_level VARCHAR(100) NOT NULL,
      classification_number VARCHAR(100),
      issued_date DATE,
      expiry_date DATE,
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:28:29.179Z] - CUSTOM QUERY - Created index on employee_professional_classifications.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_employee_id ON employee_professional_classifications(employee_id)
---

[2025-11-22T17:28:29.283Z] - CUSTOM QUERY - Created index on employee_professional_classifications.profession
SQL Query: CREATE INDEX IF NOT EXISTS idx_classifications_profession ON employee_professional_classifications(profession)
---

[2025-11-22T17:28:29.405Z] - CREATE TABLE - Created table: employee_course_certificates
SQL Query: CREATE TABLE IF NOT EXISTS employee_course_certificates (
      id SERIAL PRIMARY KEY,
      employee_id INTEGER NOT NULL,
      course_type VARCHAR(100) NOT NULL CHECK (course_type IN ('speech_therapy_70h', 'physical_therapy_40h')),
      course_name VARCHAR(200) NOT NULL,
      completion_date DATE NOT NULL,
      hours_completed INTEGER NOT NULL,
      certificate_number VARCHAR(100),
      document_id INTEGER,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (employee_id) REFERENCES employees(id) ON DELETE CASCADE,
      FOREIGN KEY (document_id) REFERENCES employee_documents(id) ON DELETE SET NULL
    )
---

[2025-11-22T17:28:29.503Z] - CUSTOM QUERY - Created index on employee_course_certificates.employee_id
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_employee_id ON employee_course_certificates(employee_id)
---

[2025-11-22T17:28:29.603Z] - CUSTOM QUERY - Created index on employee_course_certificates.course_type
SQL Query: CREATE INDEX IF NOT EXISTS idx_certificates_course_type ON employee_course_certificates(course_type)
---

